{% extends "base_portal.html" %}

{% block title %}{{ message.subject }} — GeoConsulting SARLU{% endblock %}

{% block portal_content %}
{# ── Breadcrumbs ── #}
<nav class="mb-6 text-sm text-gray-500">
  <a href="{% url 'portal_messages' %}" class="hover:text-primary-700">Messages</a>
  <span class="mx-2">/</span>
  <span class="text-gray-900">{{ message.subject }}</span>
</nav>

<div class="mx-auto max-w-3xl">
  <div class="rounded-xl border border-gray-200 bg-white shadow-sm">
    {# ── Header ── #}
    <div class="border-b border-gray-200 px-6 py-5">
      <h1 class="text-lg font-bold text-gray-900">{{ message.subject }}</h1>
      <div class="mt-3 flex flex-wrap gap-x-6 gap-y-1 text-sm text-gray-500">
        <div>
          <span class="font-medium text-gray-700">De :</span>
          {{ message.from_user.get_full_name|default:message.from_user.email }}
        </div>
        <div>
          <span class="font-medium text-gray-700">À :</span>
          {{ message.to_user.get_full_name|default:message.to_user.email }}
        </div>
        <div>
          <span class="font-medium text-gray-700">Date :</span>
          {{ message.created_at|date:"d/m/Y à H:i" }}
        </div>
      </div>
    </div>

    {# ── Body ── #}
    <div class="px-6 py-6 text-sm leading-relaxed text-gray-800">
      {{ message.content|linebreaksbr }}
    </div>
  </div>

  <div class="mt-6">
    <a href="{% url 'portal_messages' %}"
       class="inline-flex items-center gap-2 text-sm font-medium text-primary-700 transition hover:text-primary-800">
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/>
      </svg>
      Retour aux messages
    </a>
  </div>
</div>
{% endblock %}
